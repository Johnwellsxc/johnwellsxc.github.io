<!DOCTYPE html>
<html>
<head>
  <script
  src="https://code.jquery.com/jquery-3.6.4.min.js"
  integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
  crossorigin="anonymous"></script>
</head>
<body>

  <div class="choose-ticket">
    <h1>Choose a ticket</h1>
    <select name="ticketselect" id="ticketselect">
      <option value="superman" price="100">Superman 100$</option>
      <option value="batman" price="150">Batman 150$</option>
      <option value="fishman" price="50">Fishman 50$</option>
      <option value="Sauceman" price="25">Sauceman 25$</option>
    </select>
    <input type="number" id="quantity" name="quantity" min="1" max="99">
    <button class="order">Add To Order</button>
  </div>

  <div class="main">
    <div class="left">
      <div class="box">
        <h3 class="tickbox">Delivery</h3>
        <h4> Mobile Entry - Free</h4>
        <p> Tickets Available by Sun Apr 3, 2022</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras et mattis eros. Curabitur at sem vestibulum, luctus sem vitae, convallis augue.</p>
      </div>
      <div class="box">
        <h3 class="tickbox">Payment</h3>
        <h4>Use Credit / Debit Card</h4>
        <div class="payment-choice visa">
          <input type="radio" checked="checked" />
          <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" />
          <div class="inner">

            <div class="visa-elements">
              <h5>Visa - 9999</h5>
              <p>User Name | exp. 00/11</p>
              <p><a href="#">Edit</a> | <a href="#">Delete</a></p>
            </div>
            <div class="security-code">
              <p>Security Code</p>
              <input type="text" value="***">
            </div>
          </div>
        </div>

        <div class="payment-choice visa hidden type2">
          <input type="radio"/>
          <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" />
          <div class="inner">

            <div class="visa-elements">
              <h5>Visa - 9999</h5>
              <p>User Name | exp. 00/11</p>
              <p><a href="#">Edit</a> | <a href="#">Delete</a></p>
            </div>
            <div class="security-code">
              <p>Security Code</p>
              <input type="text" value="***">
            </div>
          </div>
        </div>

        <div class="new-card">
          <button>+</button>
          <img src="" />
          <h5>Add New Card</h5>
        </div>
        <h5>Or Pay With</h5>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras et mattis eros. Curabitur at sem vestibulum, luctus sem vitae, convallis <a href="#">augue</a></p>
      </div>
    </div>
    <!-- left -->
    <div class="right">
      <div class="total">
        <h3>Total</h3>
        <h3 class="amount">$0.00</h3>
      </div>
      <div class="tickets">
        <h4>Tickets</h4>
        <div class="inner">
          <!-- <p>Lorem ipsum: $220.00 x 2</p>
          <p>$00.00</p> -->
        </div>
      </div>
      <div class="seller-notes">
        <h4>Notes from Seller</h4>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras et mattis eros. Curabitur at sem vestibulum, luctus sem vitae, convallis.</p>
      </div>
      <div class="fees">
        <h4>Fees</h4>
        <div class="service-fee">
          <p>Service Fee:</p>
          <p>$00.00</p>
        </div>
        <div class="order-processing">
          <p>Order Processing Fee</p>
          <p>$00.00</p>
        </div>
      </div>
      <div class="delivery">
        <h4>Delivery</h4>
        <div>
          <p>Mobile Entry</p>
          <p>Free</p>
        </div>
      </div>
      <a href="#" class="cancel"><p>Cancel Order</p></a>
      <p>*All Sales Final - No Refunds</p>
      <div class="terms">
        <input type="radio">
        <p> I have read and agree to the current <a href="#">Terms of Use</a></p>
      </div>
      <input type="submit" class="submit" value="Place Order">
      <p><small>*Exceptions may apply, see our <a href="#">Terms of Use</a></small></p>
    </div>
  </div>


</body>
<style>
  div.main {
    display: flex;
    flex-wrap: wrap;
    max-width: 1080px;
    margin: 0 auto;
    background: white;
    padding: 30px;
    box-shadow: 6px 3px 10px -2px #e7e7e7;
    margin-bottom: 100px;
  }
  div.main .left, div.main .right {
      /* width: 50%; */
  }
  div.main .left .box {
      border: 1px solid #978989;
      padding: 10px;
      margin: 0 0px 15px 0;
      border-radius: 5px;
  }
  * {
      font-family: arial;
  }
  div.main .left .box:nth-child(1) p:nth-child(3) {
      margin: 0px;
  }
  div.main .left .box:nth-child(1) p:nth-child(4) {
      margin-top: 0;
  }
  h3.tickbox:after {
      content: "✓";
      margin-left: 10px;
      border: 2px solid green;
      color: green;
      padding: 1px 4px;
      border-radius: 60px;
  }
  .payment-choice.visa {
      display: flex;
      background: #f2f7fc;
      padding: 20px 10px;
  }

  .payment-choice img {
      max-width: 50px;
  }
  .visa-elements * {
      margin: 0 0px 6px 0px;
  }

  .payment-choice.visa input, .payment-choice.visa img {
      align-self: flex-start;
  }
  .payment-choice.visa>* {
      margin-right: 15px;
  }
  .security-code p {
      margin-bottom: 3px;
  }
  .new-card h5 {
      margin: 9px 0 0 15px;
      cursor: pointer;
  }
  .new-card button {
      padding: 0px 1px;
      margin-left: 2px;
      background: none;
      border: none;
      margin-right: -1px;
      color: #004eff;
      font-size: 30px;
      cursor: pointer;
  }
  .new-card {
    display: flex;
    margin-top: 20px;
    padding: 20px 10px;
    border-bottom: 1px solid #cbd3db;
  }
  .new-card h5, a {
      color: blue;
      text-decoration: none;
  }
  .new-card+h5, .new-card+h5+p {
      padding: 0px 10px;
  }
  .right {
    border: 1px solid #978989;
      padding: 10px;
      border-radius: 5px;
      width: calc(50% - 30px) !important;
      margin-left: 8px;
  }
  .left {
      margin-right: 8px;
      width: calc(50% - 8px);
  }
  .total {
      display: flex;
      justify-content: space-between;
  }
  .total h3+h3:after {
      content: '˄';
      margin-left: 9px;
      color: grey;
      font-size: 23px;
      font-weight: 100;
      font-family: monospace;
      position: relative;
      top: 7px;
      cursor: pointer;
  }
  .tickets .inner {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
  }
  .js-item * {
    margin: 5px 0px 0 0;
  }
  .seller-notes h4,
  .tickets h4 {
      margin-bottom: 10px;
  }
  .fees > div {
      display: flex;
      justify-content: space-between;
  }
  .fees * {
      margin-bottom: 0;
  }
  .fees .order-processing * {
      margin-top: 5px;
  }
  .delivery>div {
      display: flex;
      justify-content: space-between;
  }
  .delivery h4 {
    margin-bottom: 0;
  }
  a.cancel {
    font-weight: bold;
  }
  a.cancel p {
    margin-bottom: 50px;
  }
  .terms {
    display: flex;
}
.terms input {
    margin-bottom: 3px;
    margin-right: 10px;
}
a.cancel+p {
    font-weight: bold;
}
.terms p {
    font-weight: bold;
}
input.submit {
    width: 100%;
    background: #3b7e2a;
    border: none;
    color: white;
    font-size: 20px;
    padding: 20px 0;
    margin-top: 20px;
    cursor: pointer;
}
.choose-ticket {
  max-width: 1080px;
  margin: 60px auto 60px;
}
.payment-choice.visa.type2 input {
    pointer-events: none;
}
.payment-choice.visa.type2 {
    background: none;
}
.payment-choice.visa.hidden.type2 {
    display: none;
}
html {
    background: #f8fcff;
}
.js-item {
    display: flex;
    justify-content: space-between;
    width: 100%;
    text-transform: capitalize;
}
.js-item span {
    text-transform: initial;
}






  /* . */

</style>
<script>

  // count decimals function
  var countDecimals = function(value) {
    let text = value.toString()
    // verify if number 0.000005 is represented as "5e-6"
    if (text.indexOf('e-') > -1) {
      let [base, trail] = text.split('e-');
      let deg = parseInt(trail, 10);
      return deg;
    }
    // count decimals for number in representation like "0.123456"
    if (Math.floor(value) !== value) {
      return value.toString().split(".")[1].length || 0;
    }
    return 0;
  }


  // console.log('test');
  total = parseInt(0);
  // console.log('total:'+total);
  $( "button.order" ).on( "click", function() {
    var ticketval = $('select#ticketselect').find(":selected").val();
      // console.log( "ticketval: "+ticketval );
    var ticketval2 = $('select#ticketselect').find(":selected").attr('price');
    // console.log( "ticketval: "+ticketval2 );
    var ticketquantity = $('input#quantity').val();
    // console.log( ticketquantity );
    var price = (ticketval2) * ticketquantity;
    // console.log(price);

    // if ticket greater than 1 then
    if (parseInt(ticketquantity) >= 1) {

      // Add to Total
      total = parseInt(total) + parseInt(price);
      console.log('total:'+total);

      $('.tickets .inner').append('<div class="js-item"><p>'+ticketval+' <span>x</span> '+ticketquantity+'</p><p>$'+price+'.00</p></div>');

      $('.total h3.amount').html('$'+total+'.00');

      var servicefee = total * 0.05;
      var orderfee = total * 0.02;


      if (servicefee % 1 != 0) {
        // console.log('triggered');
        console.log(countDecimals(servicefee));
        var decimals = countDecimals(servicefee);
        if(decimals == 1){
          $('.service-fee p+p').html('$'+servicefee+'0');
          console.log('decimal 1');
        }
        else if(decimals == 2){
          $('.service-fee p+p').html('$'+servicefee);
          console.log('decimal 2+')
        }
      }
      else{
        $('.service-fee p+p').html('$'+servicefee+'.00');
      }

      if (orderfee % 1 != 0) {
        // console.log('triggered');
        console.log(countDecimals(orderfee));
        var decimals = countDecimals(orderfee);
        if(decimals == 1){
          $('.order-processing p+p').html('$'+orderfee+'0');
          console.log('decimal 1');
        }
        else if(decimals == 2){
          $('.order-processing p+p').html('$'+orderfee);
          console.log('decimal 2+')
        }
      }
      else{
        $('.order-processing p+p').html('$'+orderfee+'.00');
      }


    }

  }); // End on click add to order

  $( "a.cancel" ).on( "click", function() {
    console.log('cancel click');

    // Reset Total
    total = parseInt(0);
    $('.total h3.amount').html('$00.00');
    $('.js-item').remove();
  });


  // new visa
  $('.new-card').on( "click", function() {
      $(".payment-choice.visa:nth-child(4)").clone().removeClass('hidden').insertBefore(".new-card");
  });




</script>
</html>
